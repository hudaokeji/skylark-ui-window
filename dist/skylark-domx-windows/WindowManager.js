/**
 * skylark-domx-windows - The skylark windows plugin library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-domx-windows/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-data","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-velm","skylark-domx-query","skylark-domx-plugins","./windows","./Window"],function(n,t,i,e,o,s,r,a,d,c,l,w){var h=t.Emitter.inherit({klassName:"WindowManager",init:function(n){return this.windows=[],n=n||{},this.initialize(n),this},findWindowByID:function(n){var i=null;return t.each(this.windows,function(t,e){console.log(arguments),e.id===n&&(i=e)}),i},destroyWindow:function(n){var i=this,e=!1;return t.each(this.windows,function(t,o){o===n&&(n.close(),i.windows.splice(t,1),i.resortWindows(),e=!0)}),e},closeWindow:function(n){this.destroyWindow(n)},resortWindows:function(){t.each(this.windows,function(n,t){t.setIndex(900+n)})},setFocused:function(n){for(var i;n.getBlocker();)n=n.getBlocker();t.each(this.windows,function(t,e){e.setActive(!1),e===n&&(i=t)}),this.windows.push(this.windows.splice(i,1)[0]),n.setActive(!0),this.resortWindows()},sendToBack:function(n){var t=this.windows.splice(this.windows.indexOf(n),1)[0];return this.windows.unshift(t),this.resortWindows(),!0},initialize:function(n){this.options=n,this.elements={},this.options.container&&(this.elements.container=d(this.options.container),this.elements.container.addClass("window-pane"))},getContainer:function(){var n;return this.elements&&this.elements.container&&(n=this.elements.container),n},setNextFocused:function(){this.setFocused(this.windows[this.windows.length-1])},addWindow:function(n){var t=this;return n.getElement().on("focused",function(i){t.setFocused(n)}),n.getElement().on("close",function(){t.destroyWindow(n),n.getWindowTab()&&n.getWindowTab().remove()}),n.on("bsw.restore",function(){t.resortWindows()}),this.options.container&&(n.setWindowTab(d('<span class="label label-default">'+n.getTitle()+'<button class="close">x</button></span>')),n.getWindowTab().find(".close").on("click",function(t){var i=n.getBlocker();i?i.blink():n.close()}),n.getWindowTab().on("click",function(i){var e=n.getBlocker();e?e.blink():(t.setFocused(n),n.getSticky()&&window.scrollTo(0,n.getElement().position().top))}),d(this.options.container).append(n.getWindowTab())),this.windows.push(n),n.setManager(this),this.setFocused(n),n},createWindow:function(n){var i=t.mixin({},n);this.options.windowTemplate&&!i.template&&(i.template=this.options.windowTemplate);var e=new w(i.template,i);return this.addWindow(e)}});return w.WindowManager=h,l.WindowManager=h});
//# sourceMappingURL=sourcemaps/WindowManager.js.map
