{"version":3,"sources":["Window.js"],"names":["define","skylark","langx","browser","datax","eventer","noder","geom","velm","$","Movable","Widget","Window","inherit","klassName","init","element","options","defaults","selectors","handle","title","body","footer","elements","references","window","effect","parseHandleForTitle","maximized","maximizable","bodyContent","footerContent","this","mixin","$el","hasClass","addClass","data","find","length","prepend","html","buttons","maximize","restore","undock","setSticky","sticky","_this","css","appendTo","centerWindow","test","navigator","userAgent","bind","event","on","e","stopPropagation","initHandlers","hide","id","show","removeClass","state","bottomOffset","window_manager","getContainer","height","top","parseInt","left","right","bottom","maxWidth","width","trigger","namespace","removeAttr","undefined","window_info","removeProp","cb","callbackHandler","call","arguments","fadeIn","setEffect","getEffect","maxHeight","bodyTop","position","outerWidth","outerHeight","close","parent","clearBlocker","setFocused","windows","setNextFocused","closeFn","remove","fadeOut","$windowTab","apply","sendToBack","returnVal","setActive","active","setIndex","index","setWindowTab","windowTab","getWindowTab","getTitle","getElement","getSticky","setManager","preventDefault","blocker","moveable","resize","setBlocker","window_handle","shade","append","getParent","setParent","getBlocker","blink","focused","blinkInterval","setInterval","toggleClass","setTimeout","clearInterval","elm","wgt","option","fn","each","partial","domNode","off","$this","opts","clone","WindowManager","sbswt","WidgetBase","initialize","findWindowByID","returnValue","console","log","destroyWindow","splice","resortWindows","closeWindow","focused_window","focusedWindowIndex","windowHandle","push","indexOf","unshift","container","addWindow","window_object","scrollTo","createWindow","window_options","final_options","windowTemplate","template","newWindow","attach"],"mappings":"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","file":"../Window.js","sourcesContent":["define([\r\n  \"skylark-langx/skylark\",\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils-dom/browser\",\r\n  \"skylark-utils-dom/datax\",\r\n  \"skylark-utils-dom/eventer\",\r\n  \"skylark-utils-dom/noder\",\r\n  \"skylark-utils-dom/geom\",\r\n  \"skylark-utils-dom/elmx\",\r\n  \"skylark-utils-dom/query\",\r\n  \"skylark-domx-interact/Movable\",\r\n  \"skylark-widgets-swt/Widget\"\r\n],function(skylark,langx,browser,datax,eventer,noder,geom,velm,$,Movable,Widget){\r\n\r\n\r\n/*----------------------------------------------------------------------*/\r\n    /*\r\n    https://github.com/earmbrust/bootstrap-window\r\n\r\n    Copyright (c) 2013-2015 Elden Armbrust\r\n\r\n    Permission is hereby granted, free of charge, to any person obtaining a copy\r\n    of this software and associated documentation files (the \"Software\"), to deal\r\n    in the Software without restriction, including without limitation the rights\r\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n    copies of the Software, and to permit persons to whom the Software is\r\n    furnished to do so, subject to the following conditions:\r\n\r\n    The above copyright notice and this permission notice shall be included in\r\n    all copies or substantial portions of the Software.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n    THE SOFTWARE.\r\n    */\r\n    var namespace = 'bsw';\r\n\r\n    var Window = Widget.inherit({\r\n        klassName: \"Window\",\r\n\r\n        init : function(element,options) {\r\n            options = options || {};\r\n            var defaults = {\r\n                selectors: {\r\n                    handle: '.window-header',\r\n                    title: '.window-title',\r\n                    body: '.window-body',\r\n                    footer: '.window-footer'\r\n                },\r\n                elements: {\r\n                    handle: null,\r\n                    title: null,\r\n                    body: null,\r\n                    footer: null\r\n                },\r\n                references: {\r\n                    body: $('body'),\r\n                    window: $(window)\r\n                },\r\n                effect: 'fade',\r\n                parseHandleForTitle: true,\r\n                maximized: false,\r\n                maximizable: false,\r\n                title: 'No Title',\r\n                bodyContent: '',\r\n                footerContent: ''\r\n            };\r\n            options = this.options = langx.mixin({}, defaults, options,true);\r\n\r\n            var _this = this;\r\n\r\n            this.$el = $(element);\r\n\r\n            if (!this.$el.hasClass('window')) {\r\n                this.$el.addClass('window');\r\n            }\r\n            this.$el.data('window', this);\r\n\r\n            if (this.$el.find(options.selectors.handle).length <= 0) {\r\n                this.$el.prepend('<div class=\"window-header\"><h4 class=\"window-title\"></h4></div>');\r\n            }\r\n\r\n            options.elements.handle = this.$el.find(options.selectors.handle);\r\n            options.elements.title = this.$el.find(options.selectors.title);\r\n            options.elements.body = this.$el.find(options.selectors.body);\r\n            options.elements.footer = this.$el.find(options.selectors.footer);\r\n            options.elements.title.html(options.title);\r\n\r\n            if (options.maximizable) {\r\n                options.elements.buttons = {};\r\n                options.elements.buttons.maximize = $('<button data-maximize=\"window\"><i class=\"glyphicon glyphicon-chevron-up\"></i></button>');\r\n                options.elements.handle.prepend(options.elements.buttons.maximize);\r\n                options.elements.buttons.restore = $('<button data-restore=\"window\"><i class=\"glyphicon glyphicon-modal-window\"></i></button>');\r\n                options.elements.handle.prepend(options.elements.buttons.restore);\r\n\r\n            }\r\n            if (_this.$el.find('[data-dismiss=window]').length <= 0) {\r\n                options.elements.handle.prepend('<button type=\"button\" class=\"close\" data-dismiss=\"window\" aria-hidden=\"true\"><i class=\"glyphicon glyphicon-remove\"></i></button>');\r\n            }\r\n            options.elements.body.html(options.bodyContent);\r\n            options.elements.footer.html(options.footerContent);\r\n\r\n            this.undock();\r\n\r\n            this.setSticky(options.sticky);\r\n\r\n            return this;\r\n        },\r\n\r\n        undock : function() {\r\n            var _this = this;\r\n            this.$el.css('visibility', 'hidden');\r\n            this.$el.appendTo('body');\r\n            this.centerWindow();\r\n            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n                this.options.references.window.bind('orientationchange resize', function(event) {\r\n                    _this.centerWindow();\r\n                });\r\n            }\r\n\r\n            this.$el.on('touchmove', function(e) {\r\n                e.stopPropagation();\r\n            });\r\n\r\n            this.initHandlers();\r\n            this.$el.hide();\r\n            if (this.options.id) {\r\n                this.id = this.options.id;\r\n            } else {\r\n                this.id = '';\r\n            }\r\n            this.show();\r\n        },\r\n\r\n        maximize : function() {\r\n            this.$el.removeClass('minimized');\r\n            this.$el.addClass('maximized');\r\n            this.state = \"maximized\";\r\n            var bottomOffset = 0;\r\n            if (this.options.window_manager) {\r\n                bottomOffset = this.options.window_manager.getContainer().height();\r\n            }\r\n            this.$el.css({\r\n                top: parseInt($('body').css('padding-top'), 10),\r\n                left: 0,\r\n                right: 0,\r\n                bottom: bottomOffset,\r\n                maxWidth: 'none',\r\n                width: 'auto',\r\n                height: 'auto'\r\n            });\r\n            this.$el.trigger(namespace + '.maximize');\r\n        },\r\n\r\n\r\n        restore : function() {\r\n            this.$el.removeClass('minimized');\r\n            this.$el.removeClass('maximized');\r\n            this.$el.removeAttr('style');\r\n            this.state = undefined;\r\n            this.$el.css({\r\n                top: this.window_info.top,\r\n                left: this.window_info.left,\r\n                width: this.window_info.width,\r\n                height: this.window_info.height\r\n            });\r\n            this.$el.removeProp('style');\r\n            this.$el.trigger(namespace + '.restore');\r\n        },\r\n\r\n        show : function(cb) {\r\n            var _this = this;\r\n            this.$el.css('visibility', 'visible');\r\n            var callbackHandler = function() {\r\n                _this.$el.trigger(namespace + '.show');\r\n                if (cb) {\r\n                    cb.call(_this, arguments);\r\n                }\r\n            };\r\n            if (this.options.effect === 'fade') {\r\n                this.$el.fadeIn(undefined, undefined, callbackHandler);\r\n            } else {\r\n                callbackHandler.call(this.$el);\r\n            }\r\n        },\r\n\r\n        setEffect : function(effect) {\r\n            this.options.effect = effect;\r\n        },\r\n\r\n        getEffect : function() {\r\n            return this.options.effect;\r\n        },\r\n\r\n        centerWindow : function() {\r\n            var top, left,\r\n                bodyTop = parseInt(this.options.references.body.position().top, 10) + parseInt(this.options.references.body.css('paddingTop'), 10),\r\n                maxHeight;\r\n            if (!this.options.sticky) {\r\n                left = (this.options.references.window.width() / 2) - (this.$el.width() / 2);\r\n                top = (this.options.references.window.height() / 2) - (this.$el.height() / 2);\r\n            } else {\r\n                left = (this.options.references.window.width() / 2) - (this.$el.width() / 2);\r\n                top = (this.options.references.window.height() / 2) - (this.$el.height() / 2);\r\n            }\r\n\r\n            if (top < bodyTop) {\r\n                top = bodyTop;\r\n            }\r\n            maxHeight = ((this.options.references.window.height() - bodyTop) - (parseInt(this.options.elements.handle.css('height'), 10) + parseInt(this.options.elements.footer.css('height'), 10))) - 45;\r\n            this.options.elements.body.css('maxHeight', maxHeight);\r\n\r\n            this.$el.css('left', left);\r\n            this.$el.css('top', top);\r\n            if (this.$el && this.$el.length > 0) {\r\n                this.window_info = {\r\n                    top: this.$el.position().top,\r\n                    left: this.$el.position().left,\r\n                    width: this.$el.outerWidth(),\r\n                    height: this.$el.outerHeight()\r\n                };\r\n            }\r\n            this.$el.trigger(namespace + '.centerWindow');\r\n        },\r\n\r\n        close : function(cb) {\r\n            var _this = this;\r\n            if (this.options.parent) {\r\n                this.options.parent.clearBlocker();\r\n                if (this.options.window_manager) {\r\n                    this.options.window_manager.setFocused(this.options.parent);\r\n                }\r\n            } else if (this.options.window_manager && this.options.window_manager.windows.length > 0) {\r\n                this.options.window_manager.setNextFocused();\r\n            }\r\n\r\n            var closeFn = function() {\r\n                _this.$el.trigger(namespace + '.close');\r\n                _this.$el.remove();\r\n                if (cb) {\r\n                    cb.call(_this);\r\n                }\r\n            };\r\n\r\n            if (this.options.effect === 'fade') {\r\n                this.$el.fadeOut(closeFn);\r\n            } else {\r\n                closeFn.call(_this.$el);\r\n            }\r\n\r\n            if (this.$windowTab) {\r\n                if (this.options.effect === 'fade') {\r\n                    this.$windowTab.fadeOut(400, function() {\r\n                        _this.$windowTab.remove();\r\n                    });\r\n                } else {\r\n                    this.$windowTab.hide();\r\n                    this.$windowTab.remove();\r\n                }\r\n\r\n            }\r\n        },\r\n\r\n        on : function() {\r\n            this.$el.on.apply(this.$el, arguments);\r\n        },\r\n\r\n        sendToBack : function () {\r\n            var returnVal = false;\r\n            if (this.options.window_manager) {\r\n                returnVal = this.options.window_manager.sendToBack(this);\r\n            }\r\n            return returnVal;\r\n        },\r\n\r\n        setActive : function(active) {\r\n            if (active) {\r\n                this.$el.addClass('active');\r\n                if (this.$windowTab) {\r\n                    this.$windowTab.addClass('label-primary');\r\n                }\r\n                this.$el.trigger('active');\r\n            } else {\r\n                this.$el.removeClass('active');\r\n                if (this.$windowTab) {\r\n                    this.$windowTab.removeClass('label-primary');\r\n                    this.$windowTab.addClass('label-default');\r\n                }\r\n                this.$el.trigger('inactive');\r\n            }\r\n        },\r\n\r\n        setIndex : function(index) {\r\n            this.$el.css('zIndex', index);\r\n        },\r\n\r\n        setWindowTab : function(windowTab) {\r\n            this.$windowTab = windowTab;\r\n        },\r\n\r\n        getWindowTab : function() {\r\n            return this.$windowTab;\r\n        },\r\n\r\n        getTitle : function() {\r\n            return this.options.title;\r\n        },\r\n\r\n        getElement : function() {\r\n            return this.$el;\r\n        },\r\n\r\n        setSticky : function(sticky) {\r\n            this.options.sticky = sticky;\r\n            if (sticky === false) {\r\n                this.$el.css({\r\n                    'position': 'absolute'\r\n                });\r\n            } else {\r\n                this.$el.css({\r\n                    'position': 'fixed'\r\n                });\r\n            }\r\n        },\r\n\r\n        getSticky : function() {\r\n            return this.options.sticky;\r\n        },\r\n\r\n        setManager : function(window_manager) {\r\n            this.options.window_manager = window_manager;\r\n        },\r\n\r\n        initHandlers : function() {\r\n            var _this = this;\r\n            var title_buttons;\r\n\r\n            this.$el.find('[data-dismiss=window]').on('click', function(event) {\r\n                event.stopPropagation();\r\n                event.preventDefault();\r\n                if (_this.options.blocker) {\r\n                    return;\r\n                }\r\n                _this.close();\r\n            });\r\n\r\n            this.$el.find('[data-maximize=window]').on('click', function(event) {\r\n                event.stopPropagation();\r\n                event.preventDefault();\r\n                if (_this.options.blocker) {\r\n                    return;\r\n                }\r\n                _this.maximize();\r\n            });\r\n\r\n            this.$el.find('[data-restore=window]').on('click', function(event) {\r\n                if (_this.options.blocker) {\r\n                    return;\r\n                }\r\n                _this.restore();\r\n            });\r\n\r\n            this.moveable = Movable(this.$el[0],{\r\n                handle : this.options.elements.title[0]\r\n            });\r\n\r\n            /*\r\n\r\n \r\n            this.$el.off('mousedown');\r\n            this.$el.on('mousedown', function() {\r\n                if (_this.options.blocker) {\r\n                    _this.options.blocker.getElement().trigger('focused');\r\n                    _this.options.blocker.blink();\r\n                    return;\r\n                } else {\r\n                    _this.$el.trigger('focused');\r\n                }\r\n\r\n                if (_this.$el.hasClass('ns-resize') || _this.$el.hasClass('ew-resize')) {\r\n                    $('body > *').addClass('disable-select');\r\n                    _this.resizing = true;\r\n                    _this.offset = {};\r\n                    _this.offset.x = event.pageX;\r\n                    _this.offset.y = event.pageY;\r\n                    _this.window_info = {\r\n                        top: _this.$el.position().top,\r\n                        left: _this.$el.position().left,\r\n                        width: _this.$el.outerWidth(),\r\n                        height: _this.$el.outerHeight()\r\n                    };\r\n\r\n                    if (event.offsetY < 5) {\r\n                        _this.$el.addClass('north');\r\n                    }\r\n                    if (event.offsetY > (_this.$el.height() - 5)) {\r\n                        _this.$el.addClass('south');\r\n                    }\r\n                    if (event.offsetX < 5) {\r\n                        _this.$el.addClass('west');\r\n                    }\r\n                    if (event.offsetX > (_this.$el.width() - 5)) {\r\n                        _this.$el.addClass('east');\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            _this.options.references.body.on('mouseup', function() {\r\n                _this.resizing = false;\r\n                $('body > *').removeClass('disable-select');\r\n                _this.$el.removeClass('west');\r\n                _this.$el.removeClass('east');\r\n                _this.$el.removeClass('north');\r\n                _this.$el.removeClass('south');\r\n\r\n            });\r\n            _this.options.elements.handle.off('mousedown');\r\n            _this.options.elements.handle.on('mousedown', function(event) {\r\n                if (_this.options.blocker) {\r\n                    return;\r\n                }\r\n                _this.moving = true;\r\n                _this.offset = {};\r\n                _this.offset.x = event.pageX - _this.$el.position().left;\r\n                _this.offset.y = event.pageY - _this.$el.position().top;\r\n                $('body > *').addClass('disable-select');\r\n            });\r\n            _this.options.elements.handle.on('mouseup', function(event) {\r\n                _this.moving = false;\r\n                $('body > *').removeClass('disable-select');\r\n            });\r\n\r\n\r\n            _this.options.references.body.on('mousemove', _this.$el, function(event) {\r\n                if (_this.moving && _this.state !== \"maximized\" &&\r\n                    (\r\n                        $(event.toElement).hasClass(_this.options.selectors.handle.replace('.', '')) ||\r\n                        $(event.toElement).hasClass(_this.options.selectors.title.replace('.', ''))\r\n                    )) {\r\n\r\n\r\n                    var top = _this.options.elements.handle.position().top,\r\n                        left = _this.options.elements.handle.position().left;\r\n                    _this.$el.css('top', event.pageY - _this.offset.y);\r\n                    _this.window_info.top = event.pageY - _this.offset.y;\r\n                    _this.$el.css('left', event.pageX - _this.offset.x);\r\n                    _this.window_info.left = event.pageX - _this.offset.x;\r\n                    _this.window_info.width = _this.$el.outerWidth();\r\n                    _this.window_info.height = _this.$el.outerHeight();\r\n                }\r\n                if (_this.options.resizable && _this.resizing) {\r\n                    if (_this.$el.hasClass(\"east\")) {\r\n                        _this.$el.css('width', event.pageX - _this.window_info.left);\r\n                    }\r\n                    if (_this.$el.hasClass(\"west\")) {\r\n\r\n                        _this.$el.css('left', event.pageX);\r\n                        _this.$el.css('width', _this.window_info.width + (_this.window_info.left - event.pageX));\r\n                    }\r\n                    if (_this.$el.hasClass(\"south\")) {\r\n                        _this.$el.css('height', event.pageY - _this.window_info.top);\r\n                    }\r\n                    if (_this.$el.hasClass(\"north\")) {\r\n                        _this.$el.css('top', event.pageY);\r\n                        _this.$el.css('height', _this.window_info.height + (_this.window_info.top - event.pageY));\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.$el.on('mousemove', function(event) {\r\n                if (_this.options.blocker) {\r\n                    return;\r\n                }\r\n                if (_this.options.resizable) {\r\n                    if (event.offsetY > (_this.$el.height() - 5) || event.offsetY < 5) {\r\n                        _this.$el.addClass('ns-resize');\r\n                    } else {\r\n                        _this.$el.removeClass('ns-resize');\r\n                    }\r\n                    if (event.offsetX > (_this.$el.width() - 5) || event.offsetX < 5) {\r\n                        _this.$el.addClass('ew-resize');\r\n\r\n                    } else {\r\n                        _this.$el.removeClass('ew-resize');\r\n                    }\r\n                }\r\n\r\n            });\r\n            */\r\n        },\r\n\r\n        resize : function(options) {\r\n            options = options || {};\r\n            if (options.top) {\r\n                this.$el.css('top', options.top);\r\n            }\r\n            if (options.left) {\r\n                this.$el.css('left', options.left);\r\n            }\r\n            if (options.height) {\r\n                this.$el.css('height', options.height);\r\n            }\r\n            if (options.width) {\r\n                this.$el.css('width', options.width);\r\n            }\r\n            this.$el.trigger(namespace + '.resize');\r\n        },\r\n\r\n        setBlocker : function(window_handle) {\r\n            this.options.blocker = window_handle;\r\n            this.$el.find('.disable-shade').remove();\r\n            var shade = '<div class=\"disable-shade\"></div>';\r\n            this.options.elements.body.append(shade);\r\n            this.options.elements.body.addClass('disable-scroll');\r\n            this.options.elements.footer.append(shade);\r\n            if (this.options.effect === 'fade') {\r\n                this.$el.find('.disable-shade').fadeIn();\r\n            } else {\r\n                this.$el.find('.disable-shade').show();\r\n            }\r\n\r\n            if (!this.options.blocker.getParent()) {\r\n                this.options.blocker.setParent(this);\r\n            }\r\n        },\r\n\r\n\r\n        getBlocker : function() {\r\n            return this.options.blocker;\r\n        },\r\n\r\n        clearBlocker : function() {\r\n            this.options.elements.body.removeClass('disable-scroll');\r\n            if (this.options.effect === 'fade') {\r\n                this.$el.find('.disable-shade').fadeOut(function() {\r\n                    this.remove();\r\n                });\r\n            } else {\r\n                this.$el.find('.disable-shade').hide();\r\n                this.remove();\r\n            }\r\n\r\n            delete this.options.blocker;\r\n        },\r\n\r\n        setParent : function(window_handle) {\r\n            this.options.parent = window_handle;\r\n            if (!this.options.parent.getBlocker()) {\r\n                this.options.parent.setBlocker(this);\r\n            }\r\n        },\r\n\r\n        getParent : function() {\r\n            return this.options.parent;\r\n        },\r\n\r\n        blink : function() {\r\n            var _this = this,\r\n                active = this.$el.hasClass('active'),\r\n\r\n                windowTab = this.getWindowTab(),\r\n                focused = windowTab ? windowTab.hasClass('label-primary') : undefined,\r\n\r\n                blinkInterval = setInterval(function() {\r\n                    _this.$el.toggleClass('active');\r\n                    if (windowTab) {\r\n                        windowTab.toggleClass('label-primary');\r\n                    }\r\n\r\n                }, 250),\r\n                blinkTimeout = setTimeout(function() {\r\n                    clearInterval(blinkInterval);\r\n                    if (active) {\r\n                        _this.$el.addClass('active');\r\n                    }\r\n                    if (windowTab && focused) {\r\n                        windowTab.addClass('label-primary');\r\n                    }\r\n\r\n                }, 1000);\r\n        }\r\n\r\n    });\r\n\r\n\r\n    datax.window = function(elm,options) {\r\n      var wgt  = this.data(elm,'sbswt.window');\r\n\r\n      if (!wgt) {\r\n        this.data(elm,'sbswt.window', (wgt = new Window(elm)));\r\n      }\r\n      if (typeof option == 'string') {\r\n        wgt[options]();\r\n      } \r\n   };\r\n\r\n\r\n    $.fn.window = function(options) {\r\n        return this.each(function() {\r\n            datax.window(this,options);          \r\n        });\r\n    };\r\n\r\n    velm.partial(\"window\",function(options){\r\n        datax.window(this.domNode,options);\r\n    });\r\n\r\n    $('[data-window-target]').off('click');\r\n    $('[data-window-target]').on('click', function() {\r\n        var $this = $(this),\r\n            opts = {\r\n                selectors: {}\r\n            };\r\n        if ($this.data('windowTitle')) {\r\n            opts.title = $this.data('windowTitle');\r\n        }\r\n\r\n        if ($this.data('titleHandle')) {\r\n            opts.selectors.title = $this.data('titleHandle');\r\n        }\r\n\r\n        if ($this.data('windowHandle')) {\r\n            opts.selectors.handle = $this.data('windowHandle');\r\n        }\r\n        if ($this.data('clone')) {\r\n            opts.clone = $this.data('windowHandle');\r\n        }\r\n\r\n        $($this.data('windowTarget')).window(opts);\r\n    });\r\n\r\n\r\n    var WindowManager = sbswt.WindowManager = sbswt.WidgetBase.inherit({\r\n        klassName: \"WindowManager\",\r\n\r\n        init : function(options) {\r\n            this.windows = [];\r\n            options = options || {};\r\n            this.initialize(options);\r\n            return this;\r\n        },\r\n\r\n        findWindowByID : function(id) {\r\n            var returnValue = null;\r\n            langx.each(this.windows, function(index, window) {\r\n                console.log(arguments);\r\n                if (window.id === id) {\r\n                    returnValue = window;\r\n                }\r\n            });\r\n            return returnValue;\r\n        },\r\n\r\n        destroyWindow : function(window_handle) {\r\n            var _this = this;\r\n            var returnVal = false;\r\n            langx.each(this.windows, function(index, window) {\r\n                if (window === window_handle) {\r\n                    window_handle.close();\r\n                    _this.windows.splice(index, 1);\r\n                    _this.resortWindows();\r\n                    returnVal = true;\r\n                }\r\n            });\r\n            return returnVal;\r\n        },\r\n\r\n        closeWindow : function(window_handle) {\r\n            this.destroyWindow(window_handle);\r\n        },\r\n\r\n        resortWindows : function() {\r\n            var startZIndex = 900;\r\n            langx.each(this.windows, function(index, window) {\r\n\r\n                window.setIndex(startZIndex + index);\r\n            });\r\n        },\r\n\r\n        setFocused : function(focused_window) {\r\n            var focusedWindowIndex;\r\n            while (focused_window.getBlocker()) {\r\n                focused_window = focused_window.getBlocker();\r\n            }\r\n            langx.each(this.windows, function(index, windowHandle) {\r\n                windowHandle.setActive(false);\r\n                if (windowHandle === focused_window) {\r\n                    focusedWindowIndex = index;\r\n                }\r\n            });\r\n            this.windows.push(this.windows.splice(focusedWindowIndex, 1)[0]);\r\n            focused_window.setActive(true);\r\n            this.resortWindows();\r\n\r\n        },\r\n\r\n        sendToBack : function(window) {\r\n            var windowHandle = this.windows.splice(this.windows.indexOf(window), 1)[0];\r\n            this.windows.unshift(windowHandle);\r\n            this.resortWindows();\r\n            return true;\r\n        },\r\n\r\n\r\n        initialize : function(options) {\r\n            this.options = options;\r\n            this.elements = {};\r\n\r\n            if (this.options.container) {\r\n                this.elements.container = $(this.options.container);\r\n                this.elements.container.addClass('window-pane');\r\n            }\r\n        },\r\n\r\n        getContainer : function() {\r\n            var returnVal;\r\n            if (this.elements && this.elements.container) {\r\n                returnVal = this.elements.container;\r\n            }\r\n            return returnVal;\r\n        },\r\n\r\n        setNextFocused : function() {\r\n            this.setFocused(this.windows[this.windows.length - 1]);\r\n        },\r\n\r\n        addWindow : function(window_object) {\r\n            var _this = this;\r\n            window_object.getElement().on('focused', function(event) {\r\n                _this.setFocused(window_object);\r\n            });\r\n            window_object.getElement().on('close', function() {\r\n                _this.destroyWindow(window_object);\r\n                if (window_object.getWindowTab()) {\r\n                    window_object.getWindowTab().remove();\r\n                }\r\n\r\n            });\r\n\r\n            window_object.on('bsw.restore', function() {\r\n                _this.resortWindows();\r\n            });\r\n\r\n            if (this.options.container) {\r\n                window_object.setWindowTab($('<span class=\"label label-default\">' + window_object.getTitle() + '<button class=\"close\">x</button></span>'));\r\n                window_object.getWindowTab().find('.close').on('click', function(event) {\r\n                    var blocker = window_object.getBlocker();\r\n                    if (!blocker) {\r\n                        window_object.close();\r\n                    } else {\r\n                        blocker.blink();\r\n                    }\r\n\r\n                });\r\n                window_object.getWindowTab().on('click', function(event) {\r\n                    var blocker = window_object.getBlocker();\r\n                    if (!blocker) {\r\n                        _this.setFocused(window_object);\r\n                        if (window_object.getSticky()) {\r\n                            window.scrollTo(0, window_object.getElement().position().top);\r\n                        }\r\n                    } else {\r\n                        blocker.blink();\r\n                    }\r\n                });\r\n\r\n                $(this.options.container).append(window_object.getWindowTab());\r\n            }\r\n\r\n            this.windows.push(window_object);\r\n            window_object.setManager(this);\r\n            this.setFocused(window_object);\r\n            return window_object;\r\n        },\r\n\r\n        createWindow : function(window_options) {\r\n            var _this = this;\r\n            var final_options = langx.mixin({},window_options);\r\n            if (this.options.windowTemplate && !final_options.template) {\r\n                final_options.template = this.options.windowTemplate;\r\n            }\r\n\r\n            var newWindow = new Window(final_options.template,final_options);\r\n\r\n\r\n            return this.addWindow(newWindow);\r\n        }\r\n\r\n    });\r\n\r\n\r\n    Window.WindowManager = WindowManager;\r\n\r\n    return skylark.attach(\"widgets.WIndow\",Window);\r\n});"]}