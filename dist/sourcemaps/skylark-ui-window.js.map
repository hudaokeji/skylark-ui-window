{"version":3,"sources":["skylark-ui-window.js"],"names":["factory","globals","absolute","relative","base","stack","split","parts","pop","i","length","push","join","define","require","isAmd","amd","isCmd","exports","map","id","deps","dep","hasOwnProperty","Error","module","args","forEach","apply","window","skylarkjs","skylark","langx","browser","datax","eventer","noder","geom","velm","$","widgets","mover","ui","namespace","Window","Widget","inherit","klassName","init","element","options","defaults","selectors","handle","title","body","footer","elements","references","effect","parseHandleForTitle","maximized","maximizable","bodyContent","footerContent","this","mixin","_this","$el","hasClass","addClass","data","find","prepend","html","buttons","maximize","restore","undock","setSticky","sticky","css","appendTo","centerWindow","test","navigator","userAgent","bind","event","on","e","stopPropagation","initHandlers","hide","show","removeClass","state","bottomOffset","window_manager","getContainer","height","top","parseInt","left","right","bottom","maxWidth","width","trigger","removeAttr","undefined","window_info","removeProp","cb","callbackHandler","call","arguments","fadeIn","setEffect","getEffect","maxHeight","bodyTop","position","outerWidth","outerHeight","close","parent","clearBlocker","setFocused","windows","setNextFocused","closeFn","remove","fadeOut","$windowTab","sendToBack","returnVal","setActive","active","setIndex","index","setWindowTab","windowTab","getWindowTab","getTitle","getElement","getSticky","setManager","preventDefault","blocker","moveable","movable","resize","setBlocker","window_handle","shade","append","getParent","setParent","getBlocker","blink","focused","blinkInterval","setInterval","toggleClass","setTimeout","clearInterval","elm","wgt","option","fn","each","partial","domNode","off","$this","opts","clone","WindowManager","sbswt","WidgetBase","initialize","findWindowByID","returnValue","console","log","destroyWindow","splice","resortWindows","closeWindow","startZIndex","focused_window","focusedWindowIndex","windowHandle","indexOf","unshift","container","addWindow","window_object","scrollTo","createWindow","window_options","final_options","windowTemplate","template","newWindow","main"],"mappings":"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","file":"../skylark-ui-window.js","sourcesContent":["define('skylark-ui-window/window',[\n  \"skylark-langx/skylark\",\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/datax\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/velm\",\n  \"skylark-utils/query\",\n  \"skylark-utils/widgets\",  \n  \"skylark-utils-interact/mover\"\n],function(skylark,langx,browser,datax,eventer,noder,geom,velm,$,widgets,mover){\n\n    var ui = skylark.ui = skylark.ui || {};\n\n\n/*----------------------------------------------------------------------*/\n    /*\n    https://github.com/earmbrust/bootstrap-window\n\n    Copyright (c) 2013-2015 Elden Armbrust\n\n    Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the \"Software\"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n    THE SOFTWARE.\n    */\n    var namespace = 'bsw';\n\n    var Window = ui.Window = widgets.Widget.inherit({\n        klassName: \"Window\",\n\n        init : function(element,options) {\n            options = options || {};\n            var defaults = {\n                selectors: {\n                    handle: '.window-header',\n                    title: '.window-title',\n                    body: '.window-body',\n                    footer: '.window-footer'\n                },\n                elements: {\n                    handle: null,\n                    title: null,\n                    body: null,\n                    footer: null\n                },\n                references: {\n                    body: $('body'),\n                    window: $(window)\n                },\n                effect: 'fade',\n                parseHandleForTitle: true,\n                maximized: false,\n                maximizable: false,\n                title: 'No Title',\n                bodyContent: '',\n                footerContent: ''\n            };\n            options = this.options = langx.mixin({}, defaults, options,true);\n\n            var _this = this;\n\n            this.$el = $(element);\n\n            if (!this.$el.hasClass('window')) {\n                this.$el.addClass('window');\n            }\n            this.$el.data('window', this);\n\n            if (this.$el.find(options.selectors.handle).length <= 0) {\n                this.$el.prepend('<div class=\"window-header\"><h4 class=\"window-title\"></h4></div>');\n            }\n\n            options.elements.handle = this.$el.find(options.selectors.handle);\n            options.elements.title = this.$el.find(options.selectors.title);\n            options.elements.body = this.$el.find(options.selectors.body);\n            options.elements.footer = this.$el.find(options.selectors.footer);\n            options.elements.title.html(options.title);\n\n            if (options.maximizable) {\n                options.elements.buttons = {};\n                options.elements.buttons.maximize = $('<button data-maximize=\"window\"><i class=\"glyphicon glyphicon-chevron-up\"></i></button>');\n                options.elements.handle.prepend(options.elements.buttons.maximize);\n                options.elements.buttons.restore = $('<button data-restore=\"window\"><i class=\"glyphicon glyphicon-modal-window\"></i></button>');\n                options.elements.handle.prepend(options.elements.buttons.restore);\n\n            }\n            if (_this.$el.find('[data-dismiss=window]').length <= 0) {\n                options.elements.handle.prepend('<button type=\"button\" class=\"close\" data-dismiss=\"window\" aria-hidden=\"true\"><i class=\"glyphicon glyphicon-remove\"></i></button>');\n            }\n            options.elements.body.html(options.bodyContent);\n            options.elements.footer.html(options.footerContent);\n\n            this.undock();\n\n            this.setSticky(options.sticky);\n\n            return this;\n        },\n\n        undock : function() {\n            var _this = this;\n            this.$el.css('visibility', 'hidden');\n            this.$el.appendTo('body');\n            this.centerWindow();\n            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n                this.options.references.window.bind('orientationchange resize', function(event) {\n                    _this.centerWindow();\n                });\n            }\n\n            this.$el.on('touchmove', function(e) {\n                e.stopPropagation();\n            });\n\n            this.initHandlers();\n            this.$el.hide();\n            if (this.options.id) {\n                this.id = this.options.id;\n            } else {\n                this.id = '';\n            }\n            this.show();\n        },\n\n        maximize : function() {\n            this.$el.removeClass('minimized');\n            this.$el.addClass('maximized');\n            this.state = \"maximized\";\n            var bottomOffset = 0;\n            if (this.options.window_manager) {\n                bottomOffset = this.options.window_manager.getContainer().height();\n            }\n            this.$el.css({\n                top: parseInt($('body').css('padding-top'), 10),\n                left: 0,\n                right: 0,\n                bottom: bottomOffset,\n                maxWidth: 'none',\n                width: 'auto',\n                height: 'auto'\n            });\n            this.$el.trigger(namespace + '.maximize');\n        },\n\n\n        restore : function() {\n            this.$el.removeClass('minimized');\n            this.$el.removeClass('maximized');\n            this.$el.removeAttr('style');\n            this.state = undefined;\n            this.$el.css({\n                top: this.window_info.top,\n                left: this.window_info.left,\n                width: this.window_info.width,\n                height: this.window_info.height\n            });\n            this.$el.removeProp('style');\n            this.$el.trigger(namespace + '.restore');\n        },\n\n        show : function(cb) {\n            var _this = this;\n            this.$el.css('visibility', 'visible');\n            var callbackHandler = function() {\n                _this.$el.trigger(namespace + '.show');\n                if (cb) {\n                    cb.call(_this, arguments);\n                }\n            };\n            if (this.options.effect === 'fade') {\n                this.$el.fadeIn(undefined, undefined, callbackHandler);\n            } else {\n                callbackHandler.call(this.$el);\n            }\n        },\n\n        setEffect : function(effect) {\n            this.options.effect = effect;\n        },\n\n        getEffect : function() {\n            return this.options.effect;\n        },\n\n        centerWindow : function() {\n            var top, left,\n                bodyTop = parseInt(this.options.references.body.position().top, 10) + parseInt(this.options.references.body.css('paddingTop'), 10),\n                maxHeight;\n            if (!this.options.sticky) {\n                left = (this.options.references.window.width() / 2) - (this.$el.width() / 2);\n                top = (this.options.references.window.height() / 2) - (this.$el.height() / 2);\n            } else {\n                left = (this.options.references.window.width() / 2) - (this.$el.width() / 2);\n                top = (this.options.references.window.height() / 2) - (this.$el.height() / 2);\n            }\n\n            if (top < bodyTop) {\n                top = bodyTop;\n            }\n            maxHeight = ((this.options.references.window.height() - bodyTop) - (parseInt(this.options.elements.handle.css('height'), 10) + parseInt(this.options.elements.footer.css('height'), 10))) - 45;\n            this.options.elements.body.css('maxHeight', maxHeight);\n\n            this.$el.css('left', left);\n            this.$el.css('top', top);\n            if (this.$el && this.$el.length > 0) {\n                this.window_info = {\n                    top: this.$el.position().top,\n                    left: this.$el.position().left,\n                    width: this.$el.outerWidth(),\n                    height: this.$el.outerHeight()\n                };\n            }\n            this.$el.trigger(namespace + '.centerWindow');\n        },\n\n        close : function(cb) {\n            var _this = this;\n            if (this.options.parent) {\n                this.options.parent.clearBlocker();\n                if (this.options.window_manager) {\n                    this.options.window_manager.setFocused(this.options.parent);\n                }\n            } else if (this.options.window_manager && this.options.window_manager.windows.length > 0) {\n                this.options.window_manager.setNextFocused();\n            }\n\n            var closeFn = function() {\n                _this.$el.trigger(namespace + '.close');\n                _this.$el.remove();\n                if (cb) {\n                    cb.call(_this);\n                }\n            };\n\n            if (this.options.effect === 'fade') {\n                this.$el.fadeOut(closeFn);\n            } else {\n                closeFn.call(_this.$el);\n            }\n\n            if (this.$windowTab) {\n                if (this.options.effect === 'fade') {\n                    this.$windowTab.fadeOut(400, function() {\n                        _this.$windowTab.remove();\n                    });\n                } else {\n                    this.$windowTab.hide();\n                    this.$windowTab.remove();\n                }\n\n            }\n        },\n\n        on : function() {\n            this.$el.on.apply(this.$el, arguments);\n        },\n\n        sendToBack : function () {\n            var returnVal = false;\n            if (this.options.window_manager) {\n                returnVal = this.options.window_manager.sendToBack(this);\n            }\n            return returnVal;\n        },\n\n        setActive : function(active) {\n            if (active) {\n                this.$el.addClass('active');\n                if (this.$windowTab) {\n                    this.$windowTab.addClass('label-primary');\n                }\n                this.$el.trigger('active');\n            } else {\n                this.$el.removeClass('active');\n                if (this.$windowTab) {\n                    this.$windowTab.removeClass('label-primary');\n                    this.$windowTab.addClass('label-default');\n                }\n                this.$el.trigger('inactive');\n            }\n        },\n\n        setIndex : function(index) {\n            this.$el.css('zIndex', index);\n        },\n\n        setWindowTab : function(windowTab) {\n            this.$windowTab = windowTab;\n        },\n\n        getWindowTab : function() {\n            return this.$windowTab;\n        },\n\n        getTitle : function() {\n            return this.options.title;\n        },\n\n        getElement : function() {\n            return this.$el;\n        },\n\n        setSticky : function(sticky) {\n            this.options.sticky = sticky;\n            if (sticky === false) {\n                this.$el.css({\n                    'position': 'absolute'\n                });\n            } else {\n                this.$el.css({\n                    'position': 'fixed'\n                });\n            }\n        },\n\n        getSticky : function() {\n            return this.options.sticky;\n        },\n\n        setManager : function(window_manager) {\n            this.options.window_manager = window_manager;\n        },\n\n        initHandlers : function() {\n            var _this = this;\n            var title_buttons;\n\n            this.$el.find('[data-dismiss=window]').on('click', function(event) {\n                event.stopPropagation();\n                event.preventDefault();\n                if (_this.options.blocker) {\n                    return;\n                }\n                _this.close();\n            });\n\n            this.$el.find('[data-maximize=window]').on('click', function(event) {\n                event.stopPropagation();\n                event.preventDefault();\n                if (_this.options.blocker) {\n                    return;\n                }\n                _this.maximize();\n            });\n\n            this.$el.find('[data-restore=window]').on('click', function(event) {\n                if (_this.options.blocker) {\n                    return;\n                }\n                _this.restore();\n            });\n\n            this.moveable = mover.movable(this.$el[0],{\n                handle : this.options.elements.title[0]\n            });\n\n            /*\n\n \n            this.$el.off('mousedown');\n            this.$el.on('mousedown', function() {\n                if (_this.options.blocker) {\n                    _this.options.blocker.getElement().trigger('focused');\n                    _this.options.blocker.blink();\n                    return;\n                } else {\n                    _this.$el.trigger('focused');\n                }\n\n                if (_this.$el.hasClass('ns-resize') || _this.$el.hasClass('ew-resize')) {\n                    $('body > *').addClass('disable-select');\n                    _this.resizing = true;\n                    _this.offset = {};\n                    _this.offset.x = event.pageX;\n                    _this.offset.y = event.pageY;\n                    _this.window_info = {\n                        top: _this.$el.position().top,\n                        left: _this.$el.position().left,\n                        width: _this.$el.outerWidth(),\n                        height: _this.$el.outerHeight()\n                    };\n\n                    if (event.offsetY < 5) {\n                        _this.$el.addClass('north');\n                    }\n                    if (event.offsetY > (_this.$el.height() - 5)) {\n                        _this.$el.addClass('south');\n                    }\n                    if (event.offsetX < 5) {\n                        _this.$el.addClass('west');\n                    }\n                    if (event.offsetX > (_this.$el.width() - 5)) {\n                        _this.$el.addClass('east');\n                    }\n                }\n            });\n\n\n            _this.options.references.body.on('mouseup', function() {\n                _this.resizing = false;\n                $('body > *').removeClass('disable-select');\n                _this.$el.removeClass('west');\n                _this.$el.removeClass('east');\n                _this.$el.removeClass('north');\n                _this.$el.removeClass('south');\n\n            });\n            _this.options.elements.handle.off('mousedown');\n            _this.options.elements.handle.on('mousedown', function(event) {\n                if (_this.options.blocker) {\n                    return;\n                }\n                _this.moving = true;\n                _this.offset = {};\n                _this.offset.x = event.pageX - _this.$el.position().left;\n                _this.offset.y = event.pageY - _this.$el.position().top;\n                $('body > *').addClass('disable-select');\n            });\n            _this.options.elements.handle.on('mouseup', function(event) {\n                _this.moving = false;\n                $('body > *').removeClass('disable-select');\n            });\n\n\n            _this.options.references.body.on('mousemove', _this.$el, function(event) {\n                if (_this.moving && _this.state !== \"maximized\" &&\n                    (\n                        $(event.toElement).hasClass(_this.options.selectors.handle.replace('.', '')) ||\n                        $(event.toElement).hasClass(_this.options.selectors.title.replace('.', ''))\n                    )) {\n\n\n                    var top = _this.options.elements.handle.position().top,\n                        left = _this.options.elements.handle.position().left;\n                    _this.$el.css('top', event.pageY - _this.offset.y);\n                    _this.window_info.top = event.pageY - _this.offset.y;\n                    _this.$el.css('left', event.pageX - _this.offset.x);\n                    _this.window_info.left = event.pageX - _this.offset.x;\n                    _this.window_info.width = _this.$el.outerWidth();\n                    _this.window_info.height = _this.$el.outerHeight();\n                }\n                if (_this.options.resizable && _this.resizing) {\n                    if (_this.$el.hasClass(\"east\")) {\n                        _this.$el.css('width', event.pageX - _this.window_info.left);\n                    }\n                    if (_this.$el.hasClass(\"west\")) {\n\n                        _this.$el.css('left', event.pageX);\n                        _this.$el.css('width', _this.window_info.width + (_this.window_info.left - event.pageX));\n                    }\n                    if (_this.$el.hasClass(\"south\")) {\n                        _this.$el.css('height', event.pageY - _this.window_info.top);\n                    }\n                    if (_this.$el.hasClass(\"north\")) {\n                        _this.$el.css('top', event.pageY);\n                        _this.$el.css('height', _this.window_info.height + (_this.window_info.top - event.pageY));\n                    }\n                }\n            });\n\n            this.$el.on('mousemove', function(event) {\n                if (_this.options.blocker) {\n                    return;\n                }\n                if (_this.options.resizable) {\n                    if (event.offsetY > (_this.$el.height() - 5) || event.offsetY < 5) {\n                        _this.$el.addClass('ns-resize');\n                    } else {\n                        _this.$el.removeClass('ns-resize');\n                    }\n                    if (event.offsetX > (_this.$el.width() - 5) || event.offsetX < 5) {\n                        _this.$el.addClass('ew-resize');\n\n                    } else {\n                        _this.$el.removeClass('ew-resize');\n                    }\n                }\n\n            });\n            */\n        },\n\n        resize : function(options) {\n            options = options || {};\n            if (options.top) {\n                this.$el.css('top', options.top);\n            }\n            if (options.left) {\n                this.$el.css('left', options.left);\n            }\n            if (options.height) {\n                this.$el.css('height', options.height);\n            }\n            if (options.width) {\n                this.$el.css('width', options.width);\n            }\n            this.$el.trigger(namespace + '.resize');\n        },\n\n        setBlocker : function(window_handle) {\n            this.options.blocker = window_handle;\n            this.$el.find('.disable-shade').remove();\n            var shade = '<div class=\"disable-shade\"></div>';\n            this.options.elements.body.append(shade);\n            this.options.elements.body.addClass('disable-scroll');\n            this.options.elements.footer.append(shade);\n            if (this.options.effect === 'fade') {\n                this.$el.find('.disable-shade').fadeIn();\n            } else {\n                this.$el.find('.disable-shade').show();\n            }\n\n            if (!this.options.blocker.getParent()) {\n                this.options.blocker.setParent(this);\n            }\n        },\n\n\n        getBlocker : function() {\n            return this.options.blocker;\n        },\n\n        clearBlocker : function() {\n            this.options.elements.body.removeClass('disable-scroll');\n            if (this.options.effect === 'fade') {\n                this.$el.find('.disable-shade').fadeOut(function() {\n                    this.remove();\n                });\n            } else {\n                this.$el.find('.disable-shade').hide();\n                this.remove();\n            }\n\n            delete this.options.blocker;\n        },\n\n        setParent : function(window_handle) {\n            this.options.parent = window_handle;\n            if (!this.options.parent.getBlocker()) {\n                this.options.parent.setBlocker(this);\n            }\n        },\n\n        getParent : function() {\n            return this.options.parent;\n        },\n\n        blink : function() {\n            var _this = this,\n                active = this.$el.hasClass('active'),\n\n                windowTab = this.getWindowTab(),\n                focused = windowTab ? windowTab.hasClass('label-primary') : undefined,\n\n                blinkInterval = setInterval(function() {\n                    _this.$el.toggleClass('active');\n                    if (windowTab) {\n                        windowTab.toggleClass('label-primary');\n                    }\n\n                }, 250),\n                blinkTimeout = setTimeout(function() {\n                    clearInterval(blinkInterval);\n                    if (active) {\n                        _this.$el.addClass('active');\n                    }\n                    if (windowTab && focused) {\n                        windowTab.addClass('label-primary');\n                    }\n\n                }, 1000);\n        }\n\n    });\n\n\n    datax.window = function(elm,options) {\n      var wgt  = this.data(elm,'sbswt.window');\n\n      if (!wgt) {\n        this.data(elm,'sbswt.window', (wgt = new Window(elm)));\n      }\n      if (typeof option == 'string') {\n        wgt[options]();\n      } \n   };\n\n\n    $.fn.window = function(options) {\n        return this.each(function() {\n            datax.window(this,options);          \n        });\n    };\n\n    velm.partial(\"window\",function(options){\n        datax.window(this.domNode,options);\n    });\n\n    $('[data-window-target]').off('click');\n    $('[data-window-target]').on('click', function() {\n        var $this = $(this),\n            opts = {\n                selectors: {}\n            };\n        if ($this.data('windowTitle')) {\n            opts.title = $this.data('windowTitle');\n        }\n\n        if ($this.data('titleHandle')) {\n            opts.selectors.title = $this.data('titleHandle');\n        }\n\n        if ($this.data('windowHandle')) {\n            opts.selectors.handle = $this.data('windowHandle');\n        }\n        if ($this.data('clone')) {\n            opts.clone = $this.data('windowHandle');\n        }\n\n        $($this.data('windowTarget')).window(opts);\n    });\n\n\n    var WindowManager = sbswt.WindowManager = sbswt.WidgetBase.inherit({\n        klassName: \"WindowManager\",\n\n        init : function(options) {\n            this.windows = [];\n            options = options || {};\n            this.initialize(options);\n            return this;\n        },\n\n        findWindowByID : function(id) {\n            var returnValue = null;\n            langx.each(this.windows, function(index, window) {\n                console.log(arguments);\n                if (window.id === id) {\n                    returnValue = window;\n                }\n            });\n            return returnValue;\n        },\n\n        destroyWindow : function(window_handle) {\n            var _this = this;\n            var returnVal = false;\n            langx.each(this.windows, function(index, window) {\n                if (window === window_handle) {\n                    window_handle.close();\n                    _this.windows.splice(index, 1);\n                    _this.resortWindows();\n                    returnVal = true;\n                }\n            });\n            return returnVal;\n        },\n\n        closeWindow : function(window_handle) {\n            this.destroyWindow(window_handle);\n        },\n\n        resortWindows : function() {\n            var startZIndex = 900;\n            langx.each(this.windows, function(index, window) {\n\n                window.setIndex(startZIndex + index);\n            });\n        },\n\n        setFocused : function(focused_window) {\n            var focusedWindowIndex;\n            while (focused_window.getBlocker()) {\n                focused_window = focused_window.getBlocker();\n            }\n            langx.each(this.windows, function(index, windowHandle) {\n                windowHandle.setActive(false);\n                if (windowHandle === focused_window) {\n                    focusedWindowIndex = index;\n                }\n            });\n            this.windows.push(this.windows.splice(focusedWindowIndex, 1)[0]);\n            focused_window.setActive(true);\n            this.resortWindows();\n\n        },\n\n        sendToBack : function(window) {\n            var windowHandle = this.windows.splice(this.windows.indexOf(window), 1)[0];\n            this.windows.unshift(windowHandle);\n            this.resortWindows();\n            return true;\n        },\n\n\n        initialize : function(options) {\n            this.options = options;\n            this.elements = {};\n\n            if (this.options.container) {\n                this.elements.container = $(this.options.container);\n                this.elements.container.addClass('window-pane');\n            }\n        },\n\n        getContainer : function() {\n            var returnVal;\n            if (this.elements && this.elements.container) {\n                returnVal = this.elements.container;\n            }\n            return returnVal;\n        },\n\n        setNextFocused : function() {\n            this.setFocused(this.windows[this.windows.length - 1]);\n        },\n\n        addWindow : function(window_object) {\n            var _this = this;\n            window_object.getElement().on('focused', function(event) {\n                _this.setFocused(window_object);\n            });\n            window_object.getElement().on('close', function() {\n                _this.destroyWindow(window_object);\n                if (window_object.getWindowTab()) {\n                    window_object.getWindowTab().remove();\n                }\n\n            });\n\n            window_object.on('bsw.restore', function() {\n                _this.resortWindows();\n            });\n\n            if (this.options.container) {\n                window_object.setWindowTab($('<span class=\"label label-default\">' + window_object.getTitle() + '<button class=\"close\">x</button></span>'));\n                window_object.getWindowTab().find('.close').on('click', function(event) {\n                    var blocker = window_object.getBlocker();\n                    if (!blocker) {\n                        window_object.close();\n                    } else {\n                        blocker.blink();\n                    }\n\n                });\n                window_object.getWindowTab().on('click', function(event) {\n                    var blocker = window_object.getBlocker();\n                    if (!blocker) {\n                        _this.setFocused(window_object);\n                        if (window_object.getSticky()) {\n                            window.scrollTo(0, window_object.getElement().position().top);\n                        }\n                    } else {\n                        blocker.blink();\n                    }\n                });\n\n                $(this.options.container).append(window_object.getWindowTab());\n            }\n\n            this.windows.push(window_object);\n            window_object.setManager(this);\n            this.setFocused(window_object);\n            return window_object;\n        },\n\n        createWindow : function(window_options) {\n            var _this = this;\n            var final_options = langx.mixin({},window_options);\n            if (this.options.windowTemplate && !final_options.template) {\n                final_options.template = this.options.windowTemplate;\n            }\n\n            var newWindow = new Window(final_options.template,final_options);\n\n\n            return this.addWindow(newWindow);\n        }\n\n    });\n\n\n/*----------------------------------------------------------------------*/\n    langx.mixin(sbswt,{\n        Window : Window,\n        WindowManager : WindowManager\n    });\n\n    return $.fn.window;\n});\ndefine('skylark-ui-window/main',[\r\n    \"skylark-utils/query\",\r\n    \"./window\"\r\n], function($) {\r\n    return $;\r\n});\ndefine('skylark-ui-window', ['skylark-ui-window/main'], function (main) { return main; });\n\n"]}